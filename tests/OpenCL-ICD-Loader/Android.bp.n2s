//
// This file has been auto-generated by ninja-to-soong
//
// ******************************
// *** DO NOT MODIFY MANUALLY ***
// ******************************
//
// https://github.com/rjodinchr/ninja-to-soong
//
// CI version, no wildcard generated
//

soong_namespace {}

package {
    default_visibility: ["//visibility:public"],
    default_applicable_licenses: ["OpenCL-ICD-Loader_license"],
}

license {
    name: "OpenCL-ICD-Loader_license",
    visibility: [":__subpackages__"],
    license_kinds: ["SPDX-license-identifier-Apache-2.0"],
    license_text: ["LICENSE"],
}

cc_library_shared {
    name: "libOpenCL",
    version_script: "loader/linux/icd_exports.map",
    srcs: [
        "loader/icd.c",
        "loader/icd_dispatch.c",
        "loader/icd_dispatch_generated.c",
        "loader/linux/icd_linux.c",
        "loader/linux/icd_linux_envvars.c",
    ],
    cflags: [
        "-DCL_ENABLE_LAYERS",
        "-DCL_ENABLE_LOADER_MANAGED_DISPATCH",
        "-DCL_NO_NON_ICD_DISPATCH_EXTENSION_PROTOTYPES",
        "-DCL_TARGET_OPENCL_VERSION=300",
        "-DICD_VENDOR_PATH=\"/vendor/etc/Khronos/OpenCL/vendors\"",
        "-DLAYER_PATH=\"/vendor/etc/Khronos/OpenCL/layers\"",
        "-DOPENCL_ICD_LOADER_VERSION_MAJOR=3",
        "-DOPENCL_ICD_LOADER_VERSION_MINOR=0",
        "-DOPENCL_ICD_LOADER_VERSION_REV=7",
    ],
    local_include_dirs: [
        "include",
        "loader",
    ],
    header_libs: ["OpenCL-Headers"],
    export_header_lib_headers: ["OpenCL-Headers"],
    generated_headers: ["generate_cmake_config"],
    soc_specific: true,
}

genrule {
    name: "generate_cmake_config",
    out: ["icd_cmake_config.h"],
    /*
        Android's libc doesn't implement `secure_getenv` or `__secure_getenv`
        so we just create an empty $(out) file.
    */
    cmd: "touch $(out)",
    visibility: ["//visibility:private"],
}
