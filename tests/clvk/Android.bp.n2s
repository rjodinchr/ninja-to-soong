//
// This file has been auto-generated by ninja-to-soong
//
// ******************************
// *** DO NOT MODIFY MANUALLY ***
// ******************************
//
// https://github.com/rjodinchr/ninja-to-soong
//
// CI version, no wildcard generated
//

package {
    default_visibility: ["//external/OpenCL-ICD-Loader"],
    default_applicable_licenses: ["clvk_license"],
}

license {
    name: "clvk_license",
    visibility: [":__subpackages__"],
    license_kinds: ["SPDX-license-identifier-Apache-2.0"],
    license_text: ["LICENSE"],
}

cc_test {
    name: "clvk_simple_test",
    srcs: ["tests/simple/simple.cpp"],
    cflags: [
        "-DCLSPV_ONLINE_COMPILER=1",
        "-DCOMPILER_AVAILABLE=1",
    ],
    shared_libs: ["libclvk"],
    gtest: false,
    test_config: "android/simple_test.xml",
    soc_specific: true,
    header_libs: ["OpenCL-Headers"],
}

cc_library_shared {
    name: "libclvk",
    version_script: "src/exports.map",
    srcs: [
        "src/api.cpp",
        "src/config.cpp",
        "src/context.cpp",
        "src/device.cpp",
        "src/device_properties.cpp",
        "src/event.cpp",
        "src/image_format.cpp",
        "src/init.cpp",
        "src/kernel.cpp",
        "src/log.cpp",
        "src/memory.cpp",
        "src/printf.cpp",
        "src/program.cpp",
        "src/queue.cpp",
        "src/queue_controller.cpp",
        "src/semaphore.cpp",
        "src/sha1.cpp",
        "src/tracing.cpp",
        "src/unit.cpp",
        "src/utils.cpp",
    ],
    cflags: [
        "-DCLSPV_ONLINE_COMPILER=1",
        "-DCLVK_PERFETTO_ENABLE",
        "-DCOMPILER_AVAILABLE=1",
    ],
    ldflags: ["-Wl,-Bsymbolic"],
    shared_libs: [
        "liblog",
        "libvulkan",
        "libz",
    ],
    static_libs: [
        "SPIRV-Tools_source_libSPIRV-Tools_a",
        "SPIRV-Tools_source_link_libSPIRV-Tools-link_a",
        "SPIRV-Tools_source_opt_libSPIRV-Tools-opt_a",
        "clspv_lib_libclspv_core_a",
        "libperfetto_client_experimental",
        "llvm-project_lib_libLLVMAggressiveInstCombine_a",
        "llvm-project_lib_libLLVMAnalysis_a",
        "llvm-project_lib_libLLVMAsmParser_a",
        "llvm-project_lib_libLLVMBinaryFormat_a",
        "llvm-project_lib_libLLVMBitReader_a",
        "llvm-project_lib_libLLVMBitWriter_a",
        "llvm-project_lib_libLLVMBitstreamReader_a",
        "llvm-project_lib_libLLVMCFGuard_a",
        "llvm-project_lib_libLLVMCGData_a",
        "llvm-project_lib_libLLVMCodeGenTypes_a",
        "llvm-project_lib_libLLVMCodeGen_a",
        "llvm-project_lib_libLLVMCore_a",
        "llvm-project_lib_libLLVMCoroutines_a",
        "llvm-project_lib_libLLVMCoverage_a",
        "llvm-project_lib_libLLVMDebugInfoBTF_a",
        "llvm-project_lib_libLLVMDebugInfoCodeView_a",
        "llvm-project_lib_libLLVMDebugInfoDWARFLowLevel_a",
        "llvm-project_lib_libLLVMDebugInfoDWARF_a",
        "llvm-project_lib_libLLVMDebugInfoGSYM_a",
        "llvm-project_lib_libLLVMDebugInfoMSF_a",
        "llvm-project_lib_libLLVMDebugInfoPDB_a",
        "llvm-project_lib_libLLVMDemangle_a",
        "llvm-project_lib_libLLVMExtensions_a",
        "llvm-project_lib_libLLVMFrontendAtomic_a",
        "llvm-project_lib_libLLVMFrontendDirective_a",
        "llvm-project_lib_libLLVMFrontendDriver_a",
        "llvm-project_lib_libLLVMFrontendHLSL_a",
        "llvm-project_lib_libLLVMFrontendOffloading_a",
        "llvm-project_lib_libLLVMFrontendOpenMP_a",
        "llvm-project_lib_libLLVMGlobalISel_a",
        "llvm-project_lib_libLLVMHipStdPar_a",
        "llvm-project_lib_libLLVMIRPrinter_a",
        "llvm-project_lib_libLLVMIRReader_a",
        "llvm-project_lib_libLLVMInstCombine_a",
        "llvm-project_lib_libLLVMInstrumentation_a",
        "llvm-project_lib_libLLVMLTO_a",
        "llvm-project_lib_libLLVMLinker_a",
        "llvm-project_lib_libLLVMMCParser_a",
        "llvm-project_lib_libLLVMMC_a",
        "llvm-project_lib_libLLVMObjCARCOpts_a",
        "llvm-project_lib_libLLVMObjectYAML_a",
        "llvm-project_lib_libLLVMObject_a",
        "llvm-project_lib_libLLVMOption_a",
        "llvm-project_lib_libLLVMPasses_a",
        "llvm-project_lib_libLLVMProfileData_a",
        "llvm-project_lib_libLLVMRemarks_a",
        "llvm-project_lib_libLLVMSandboxIR_a",
        "llvm-project_lib_libLLVMScalarOpts_a",
        "llvm-project_lib_libLLVMSelectionDAG_a",
        "llvm-project_lib_libLLVMSupport_a",
        "llvm-project_lib_libLLVMSymbolize_a",
        "llvm-project_lib_libLLVMTargetParser_a",
        "llvm-project_lib_libLLVMTarget_a",
        "llvm-project_lib_libLLVMTextAPI_a",
        "llvm-project_lib_libLLVMTransformUtils_a",
        "llvm-project_lib_libLLVMVectorize_a",
        "llvm-project_lib_libLLVMWindowsDriver_a",
        "llvm-project_lib_libLLVMipo_a",
        "llvm-project_lib_libclangAPINotes_a",
        "llvm-project_lib_libclangASTMatchers_a",
        "llvm-project_lib_libclangAST_a",
        "llvm-project_lib_libclangAnalysis_a",
        "llvm-project_lib_libclangBasic_a",
        "llvm-project_lib_libclangCodeGen_a",
        "llvm-project_lib_libclangDriver_a",
        "llvm-project_lib_libclangEdit_a",
        "llvm-project_lib_libclangFrontend_a",
        "llvm-project_lib_libclangLex_a",
        "llvm-project_lib_libclangParse_a",
        "llvm-project_lib_libclangSema_a",
        "llvm-project_lib_libclangSerialization_a",
        "llvm-project_lib_libclangSupport_a",
    ],
    soc_specific: true,
    header_libs: ["OpenCL-Headers"],
}

cc_test {
    name: "clvk_api_tests",
    srcs: [
        "tests/api/compiler.cpp",
        "tests/api/dependencies.cpp",
        "tests/api/enqueue.cpp",
        "tests/api/images.cpp",
        "tests/api/local_buffer.cpp",
        "tests/api/main.cpp",
        "tests/api/platform.cpp",
        "tests/api/printf.cpp",
        "tests/api/profiling.cpp",
        "tests/api/simple.cpp",
        "tests/api/simple_image.cpp",
        "tests/api/simple_ubo.cpp",
        "tests/api/split_region.cpp",
        "tests/api/subgroup_size.cpp",
        "tests/api/workgroup.cpp",
    ],
    cflags: [
        "-DCLSPV_ONLINE_COMPILER=1",
        "-DCOMPILER_AVAILABLE=1",
        "-Wno-missing-braces",
    ],
    shared_libs: [
        "libclvk",
        "libz",
    ],
    static_libs: [
        "llvm-project_lib_libLLVMDemangle_a",
        "llvm-project_lib_libLLVMSupport_a",
    ],
    local_include_dirs: ["tests/../src"],
    test_config: "android/api_tests.xml",
    soc_specific: true,
    header_libs: [
        "OpenCL-Headers",
        "SPIRV-Headers-includes",
        "vulkan_headers",
    ],
}

cc_genrule {
    name: "clvk_icd_genrule",
    cmd: "echo /vendor/$$CC_MULTILIB/libclvk.so > $(out)",
    out: ["clvk.icd"],
    soc_specific: true,
}

prebuilt_etc {
    name: "clvk_icd_prebuilt",
    src: ":clvk_icd_genrule",
    filename_from_src: true,
    relative_install_path: "Khronos/OpenCL/vendors",
    soc_specific: true,
}
